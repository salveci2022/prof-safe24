<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Configura√ß√£o da Escola ‚Äì PROF-SAFE 24</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: Arial, Helvetica, sans-serif;
            background: #0b0b10;
            color: #f5f5f5;
            padding: 20px;
        }
        .container { max-width: 720px; margin: 0 auto; }
        .card {
            background: #15151f;
            border-radius: 14px;
            padding: 24px;
            box-shadow: 0 0 18px rgba(0,0,0,0.6);
        }
        .header {
            display: flex;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 18px;
            align-items: flex-start;
        }
        .title { font-size: 22px; font-weight: bold; }
        .subtitle { font-size: 13px; color: #bbbbbb; }
        .badge {
            background: #ff8800;
            color: #fff;
            padding: 5px 12px;
            border-radius: 999px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: .06em;
        }
        .info-bar {
            margin-bottom: 10px;
            font-size: 12px;
            color: #dddddd;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 6px;
        }
        .info-bar strong { color: #ffcc7a; }

        label {
            display: block;
            font-weight: 600;
            margin-top: 14px;
            margin-bottom: 6px;
            font-size: 14px;
        }
        input[type="text"],
        textarea {
            width: 100%;
            padding: 11px 12px;
            border-radius: 10px;
            border: 1px solid #2a2a3a;
            background: #101018;
            color: #f5f5f5;
            font-size: 14px;
        }
        textarea {
            resize: vertical;
            min-height: 60px;
        }
        input:focus,
        textarea:focus {
            outline: none;
            border-color: #ff8800;
            box-shadow: 0 0 0 1px rgba(255,136,0,0.25);
        }
        .hint {
            font-size: 11px;
            color: #aaaaaa;
            margin-top: 3px;
        }
        .buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 22px;
        }
        .btn {
            border: none;
            border-radius: 999px;
            padding: 11px 20px;
            font-size: 14px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
        }
        .btn-primary {
            background: #ff8800;
            color: #fff;
        }
        .btn-primary:hover { background: #e67600; }
        .btn-secondary {
            background: #262638;
            color: #f5f5f5;
        }
        .btn-secondary:hover { background: #33344a; }
        .alert {
            margin-bottom: 14px;
            padding: 10px 12px;
            border-radius: 10px;
            font-size: 13px;
        }
        .alert-success {
            background: rgba(0, 180, 90, 0.1);
            border: 1px solid #00b45a;
            color: #9ff6c8;
        }
        .footer-note {
            margin-top: 18px;
            font-size: 11px;
            color: #888;
        }

        @media (max-width: 600px) {
            .card { padding: 18px 16px 20px; }
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            .info-bar { flex-direction: column; align-items: flex-start; }
        }
    </style>
</head>

<body>
<div class="container">
    <div class="card">

        <div class="header">
            <div>
                <div class="title">Configura√ß√£o da Escola</div>
                <div class="subtitle">
                    Preencha os dados oficiais da institui√ß√£o. Esta ficha pode ser impressa e anexada ao processo.
                </div>
            </div>
            <div class="badge">PROF-SAFE 24</div>
        </div>

        <div class="info-bar">
            <div>üìç <strong>Formul√°rio da escola</strong></div>
            <div>üïí Data/Hora: <span id="data-hora-br"></span></div>
        </div>

        {% if saved %}
        <div class="alert alert-success">
            ‚úÖ Dados da escola salvos com sucesso.
        </div>
        {% endif %}

        <!-- IMPORTANTE: n√£o muda o action, usa a rota que j√° existe no seu app.py -->
        <form method="POST" action="{{ url_for('admin_escola') if 'admin_escola' in globals() else url_for('admin_escola_painel', _fallback=False) }}">
            <!-- Se no seu app.py a fun√ß√£o se chama admin_escola, ele usa admin_escola.
                 Se voc√™ renomeou pra admin_escola_painel, ele tenta usar essa. -->

            <label for="school_name">Nome da escola</label>
            <input type="text" id="school_name" name="school_name"
                   value="{{ school_name or '' }}" required>
            <div class="hint">Ex.: Escola Municipal Primavera / Col√©gio PROF-SAFE 24.</div>

            <label for="school_address">Endere√ßo completo</label>
            <input type="text" id="school_address" name="school_address"
                   value="{{ school_address or '' }}" required>
            <div class="hint">Rua, n√∫mero, bairro, cidade/UF.</div>

            <label for="school_contact">Contato (telefone / e-mail / respons√°vel)</label>
            <textarea id="school_contact" name="school_contact" required>{{ school_contact or '' }}</textarea>
            <div class="hint">Ex.: (61) 99999-0000 ‚Ä¢ contato@escola.br ‚Ä¢ Dire√ß√£o: Maria da Silva.</div>

            <div class="buttons">
                <button type="submit" class="btn btn-primary">
                    üíæ Salvar dados da escola
                </button>

                <a href="{{ url_for('central') }}" class="btn btn-secondary">
                    ‚èé Voltar para a Central
                </a>

                <a href="{{ url_for('home') }}" class="btn btn-secondary">
                    üè† Tela inicial
                </a>
            </div>
        </form>

        <div class="footer-note">
            Esta tela pode ser impressa depois de salvar (Ctrl+P / Imprimir).  
            A data e hor√°rio s√£o atualizados automaticamente em hor√°rio de Bras√≠lia (America/Sao_Paulo).
        </div>
    </div>
</div>

<script>
    // Data e hor√°rio sempre em hor√°rio de Bras√≠lia
    function atualizarDataHoraBrasil() {
        try {
            const agora = new Date();
            const texto = agora.toLocaleString("pt-BR", {
                timeZone: "America/Sao_Paulo",
                day: "2-digit",
                month: "2-digit",
                year: "numeric",
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit"
            });
            const el = document.getElementById("data-hora-br");
            if (el) el.textContent = texto;
        } catch (e) {
            console.error("Erro ao atualizar data/hora:", e);
        }
    }

    atualizarDataHoraBrasil();
    setInterval(atualizarDataHoraBrasil, 1000);
</script>
</body>
</html>
